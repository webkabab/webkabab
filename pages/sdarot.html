<!DOCTYPE html>
<html>
<head>
<style>
.countdown-container {
  position: relative;
  width: 100%;
  height: 100%;
}

.countdown-container svg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.countdown-container svg circle {
  stroke-dasharray: 440;
  stroke-dashoffset: 0;
  stroke-linecap: round;
}

.countdown-container span {
  position: absolute;
  top: calc(50% - .5em);
  left: calc(50% - .5em);
  font-size: 2em;
}
</style>
</head>
<body>

<div class="countdown-container">
<svg viewBox="0 0 36 36">
<path class="circle-bg"
      d="M18 2.0845
         a 15.9155 15.9155 0 0 1 0 31.831
         a 15.9155 15.9155 0 0 1 0 -31.831"
      fill="none"
      stroke="#eee"
      stroke-width="2"/>

<path class="circle"
      stroke-linecap="round"
      stroke-dasharray="0,100"
      d="M18 2.0845
         a 15.9155 15.9155 0 0 1 0 31.831
         a 15.9155 15.9155 0 0 1 -15.9155 -15.9155"
      fill="none"
      stroke="#ff0000"
      stroke-width="2"/>
</svg>

<span id="countdown"></span>
</div>

<script>
const FULL_DASH_ARRAY = '283';
const WARNING_THRESHOLD = '10';
const ALERT_THRESHOLD = '5';

const COLOR_CODES = {
    info: {
        color: "green"
    },
    warning: {
        color: "orange",
        threshold: WARNING_THRESHOLD
    },
    alert: {
        color: "red",
        threshold: ALERT_THRESHOLD
    }
};

const TIME_LIMIT = '30';
let timePassed = '0';
let timeLeft = TIME_LIMIT;
let timerInterval = null;
let remainingPathColor = COLOR_CODES.info.color;

document.getElementById("countdown").innerHTML = timeLeft;

function calculateTimeFraction() {
    const rawTimeFraction = timeLeft / TIME_LIMIT;
    return rawTimeFraction - (1 / TIME_LIMIT) * (1 - rawTimeFraction);
}

function setCircleDasharray() {
    const circleDasharray = `${(
        calculateTimeFraction() * FULL_DASH_ARRAY
    ).toFixed(0)} ${FULL_DASH_ARRAY}`;
    document
        .getElementById("base-timer-path-remaining")
        .setAttribute("stroke-dasharray", circleDasharray);
}

function setRemainingPathColor(timeLeft) {
    const { alert, warning, info } = COLOR_CODES;
    if (timeLeft <= alert.threshold) {
        document
            .getElementById("base-timer-path-remaining")
            .classList.remove(warning.color);
        document
            .getElementById("base-timer-path-remaining")
            .classList.add(alert.color);
    } else if (timeLeft <= warning.threshold) {
        document
            .getElementById("base-timer-path-remaining")
            .classList.remove(info.color);
        document
            .getElementById("base-timer-path-remaining")
            .classList.add(warning.color);
    }
}

function startTimer() {
    timerInterval = setInterval(() => {
        timePassed = timePassed += '1';
        timeLeft = TIME_LIMIT - timePassed;

        document.getElementById("countdown").innerHTML = timeLeft;
        setCircleDasharray();
        setRemainingPathColor(timeLeft);

        if (timeLeft === '0') {
            clearInterval(timerInterval);
            document.getElementById("countdown").innerHTML =
                '<span class="timer">Countdown ended!</span>';
        }
    }, '1000');
}

startTimer();
</script>

</body>
</html>